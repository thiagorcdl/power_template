#!/usr/bin/env bash
set -euo pipefail

if [ "${BOOTSTRAP:-0}" = "1" ]; then
  echo "[pre-push] BOOTSTRAP=1 set; skipping tests."
  exit 0
fi

echo "[pre-push] running tests..."

./scripts/test.sh

if [ $? -ne 0 ]; then
  echo "[pre-push] Tests failed. Please fix and try again."
  exit 1
fi

echo "[pre-push] tests passed. Ready to push."
